# Environments Setup Guide

## Overview

Remote Environments use the Arcane agent to expose the Docker API of a remote host. This allows for management of docker resources from a centralized server.

## Architecture

```
┌─────────────────┐    HTTP API     ┌─────────────────┐
│  Arcane Server  │ ──────────────> │    Go Agent     │
│  (Management)   │ <────────────── │  (Remote Host)  │
└─────────────────┘  HTTP RESPONSE  └─────────────────┘
```

## Prerequisites

- Docker Engine 20.10+
- Network access to Arcane server
- User with Docker socket permissions

## Configuration

The agent supports the following environment variables:

| Environment Variable  | Default Value                 | Description                                      |
| --------------------  | ----------------------------- | ------------------------------------------------ |
| `AGENT_ID`            | `<hostname-of-your-server`    | Hostname of the Arcane server                    |
| `AGENT_LISTEN_ADDRESS`| `0.0.0.0`                     | The address to bind to on the agent host         |
| `AGENT_PORT`          | `3552`                        | The Port for the agent to listen on              |
| `API_KEY`             | `-`                            | The API Key generated by the Arcane Server       |


### Configuration File

Create a `.env` file for the agent:

```bash
# .env file example
AGENT_ID=arcane-agent-example
AGENT_LISTEN_ADDRESS=0.0.0.0
AGENT_PORT=3552
API_KEY=your-secret-api-key-here
```

## Installation Options

### Docker Compose

```yaml
name: arcane-agent
services:
    arcane-agent:
        container_name: arcane-agent
        restart: unless-stopped
        environment:
            - AGENT_ID=arcane-agent-example
            - AGENT_LISTEN_ADDRESS=0.0.0.0
            - AGENT_PORT=3552
            - API_KEY=your-secret-api-key-here
        volumes:
            - /var/run/docker.sock:/var/run/docker.sock
            - $(pwd)/compose-projects:/data/compose-projects
        image: ghcr.io/ofkm/arcane-agent:latest
```

### Binary Installation

```bash
# Download the binary
wget https://github.com/ofkm/arcane-agent/releases/latest/download/arcane-agent-linux-amd64

# Make executable
chmod +x arcane-agent-linux-amd64

# Create configuration
cat > .env << EOF
AGENT_ID=arcane-agent-example
AGENT_LISTEN_ADDRESS=0.0.0.0
AGENT_PORT=3552
API_KEY=your-secret-api-key-here
EOF

# Run the agent
./arcane-agent-linux-amd64
```

## Updates

### Docker Updates

```bash
docker compose down
docker compose pull
docker compose up -d
```
